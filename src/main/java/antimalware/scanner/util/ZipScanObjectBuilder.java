package antimalware.scanner.util;

import antimalware.scanner.data.scan.IObjectContent;
import antimalware.scanner.data.scan.ScanObject;

import java.io.IOException;
import java.nio.ByteBuffer;
import java.util.zip.ZipFile;

public class ZipScanObjectBuilder {

    private final String HEADER = "PK";     // Заголовок Zip архива
    private IObjectContent objectContent;

    public ZipScanObjectBuilder(IObjectContent objectContent) {
        this.objectContent = objectContent;
    }

    public ScanObject getScanObject() {
        ByteBuffer headerBytes = ByteBuffer.allocate(2);
        objectContent.readBlock(0, headerBytes);
        String header = new String(headerBytes.array());
        if (header.equals(HEADER)) {
            /*try (ZipFile zipFile = new ZipFile(objectContent.getFile())) {
                // TODO: ...
            } catch (IOException e) {
                e.printStackTrace();
            }*/
        }
        return null;
    }
}
